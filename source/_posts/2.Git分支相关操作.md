---
title: Git.2.分支相关操作
date: 2019-02-17 15:02:32
tags: 
  - Git
categories: 
	- 版本控制工具
---
## Git分支（核心概念）
### 分支常用操作命令
git branch 查看当前分支  
git `branch <new branch>` 新建分支  
git `checkout <branch>` 切换分支  
git `checkout -b <new branch>` 创建并切换分支  
git `branch -d <branch>` 删除合并过的分支或空分支，删除前需要切换到其他分支上  
git `branch -D <branch>` 删除未合并过的分支，删除前需要切换到其他分支上  
git `merge <branch>` 合并分支 将`<branch>`分支上的修改合并到当前分支上  
git branch -v 查看当前分支最近一次提交消息  

### 分支关键词
HEAD 实际是个指针指向当前分支，当前分支指向该分支最近一次提交 HEAD存放在.get/HELD 中
``` bash.sh
$ cat .git/HEAD
ref: refs/heads/master
$ git checkout -b dev
Switched to a new branch 'dev'
$ cat .git/HEAD
ref: refs/heads/dev
```
### fast-forward
如果可能，git默认会使用fast-forward模式，对分支指针进行快进操作
在这种模式下，删除合并过的分支时会丢掉分支的信息
git merge --no -ff dev 合并并禁用fast-forward，此时会多出一个commit记录（合并的快照）
git log --graph  图表的方式显示log，可以显示分支合并的具体操作



### 分支的回退操作
git reset --hard HEAD^
git reset --hard HEAD^^
git reset --hard HEAD\~1
git reset --hard HEAD\~10
git reset --hard c41bf
git reflog 查看回退操作日志

git checkout \<commit id>

git branch -m master master2
git stash 
git stash list 
git stash save 'hello basic' 
git stash pop  保存状态取出并删除
git stash pooly 保存状态去除并保留
git stash drop stash@{0 }


### 标签tag操作
标签有两种：轻量级标签（ightweight）与带有附注标签（annotated）。标签是独立存在的，不受分支影响。
git tag v1.0.1 轻量级标签
tig tag -a v1.0.1 -m 'release version'
git tag -d tag_name
git tag 查看标签
git tag -l "v1.0" 精确查找标签
git tag -l "v1*" 模糊查找标签

### diff差异比较
diff 比较文件命令。是linux自带的系统命令 git将它加入到了git命令中。
which diff 查看diff 命令所存在的地址

diff a b
diff -u a b

git diff 查看暂存区和工作区文件的差别
git diff HEAD 查看工作区与最新一次提交的差别
git diff \<commit id> 查看工作区与指定提交id进行比较
git diff --cached 暂存区与最近提交之间的差别
git diff --cached \<commit id> 暂存区与特定版本库之间的差别



git blame \<file name>  查看文件修改记录

